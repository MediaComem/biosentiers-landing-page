/*!
 * Start Bootstrap - Agency v3.3.7+1 (http://startbootstrap.com/template-overviews/agency)
 * Copyright 2013-2017 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap/blob/gh-pages/LICENSE)
 */
$(function(){function t(){u=L.map("map",{scrollWheelZoom:!1}).setView([46.778626,6.641014],13),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18}).addTo(u)}function n(){var t=L.Control.extend({options:{position:"topleft"},onAdd:function(t){var n=$('<div class="leaflet-bar leaflet-control leaflet-custom-control"></div>'),e=$('<a href="#" title="Retour au sentier" role="button" aria-label="Retour au sentier"></a>').appendTo(n);$('<span class="glyphicon glyphicon-map-marker"></span>').appendTo(e);return e.on("click",function(n){n.preventDefault(),t.fitBounds(d,l({animate:!0,duration:.5}))}),n[0]}});u.addControl(new t)}function e(){return $.when($.ajax("/api/trails/8c8c2474-4375-4121-95d3-763f381717df/paths"),$.ajax({url:"/api/trails/8c8c2474-4375-4121-95d3-763f381717df/zones",dataType:"json"}))}function o(t,n){return $.when([a(t[0]),r(n[0])])}function a(t){for(var n,e=0;e<t.length;e++)(!n||void 0!==n.length&&t[e].length>n.length)&&(n=t[e]);L.geoJSON(i([n]),{style:function(t){return{color:"#ff00bb"}}}).addTo(u)}function r(t){for(var e,o,a,r,f=0;f<t.length;f++)for(var c=t[f],p=c.geometry.coordinates[0],s=0;s<p.length;s++){var h=p[s];o=Math.min(h[0],o||180),e=Math.min(h[1],e||90),r=Math.max(h[0],r||-180),a=Math.max(h[1],a||-90)}if(void 0!==e&&void 0!==o&&void 0!==a&&void 0!==r){var g=L.latLng(a,r),m=L.latLng(e,o);d=L.latLngBounds(m,g),u.fitBounds(d,l()),n(),L.geoJSON(i(t)).addTo(u)}}function i(t){return{type:"FeatureCollection",features:t.map(function(t){return{type:"Feature",geometry:t.geometry}})}}function l(t){return t=t||{},t.padding=t.padding||[20,20],t}var u,d;$.when().then(t).then(e).then(o)});